# ğŸ¹ Ham - LLM Token Usage Menu Bar Monitor

A macOS menu bar application featuring an animated hamster that runs at different speeds based on your real-time **OpenAI** API token usage.

Inspired by [RunCat](https://kyome.io/runcat/index.html), Ham brings a playful and intuitive system monitoring concept to LLM API usage tracking.

## âœ¨ Features

*   **ğŸ¹ Animated Hamster**: The hamster in your menu bar speeds up or slows down based on your real-time OpenAI token consumption.
*   **ğŸ“Š Detailed Usage Statistics**: Click the hamster to see a detailed menu with token usage for today, this week, and this month, complete with trend indicators.
*   **âš¡ Real-Time Activity Monitoring**: A "Recent Activity" submenu provides real-time estimates of your token usage and current activity level.
*   **ğŸ” Secure API Key Storage**: Your OpenAI API key is stored securely in the macOS Keychain.
*   **ğŸ Native macOS Experience**: Built with Swift and SwiftUI for a lightweight and efficient experience.

## ğŸš€ Installation

### Prerequisites
*   macOS 13.0 or later
*   Xcode Command Line Tools

### Build from Source

```bash
# Clone the repository
git clone https://github.com/helloericsf/ham.git
cd ham

# Build and run the app.
# The --rebuild flag cleans before building.
./start_ham.sh --rebuild
```

## ğŸ® Usage

1.  **Launch Ham**: The hamster will appear in your menu bar.
2.  **Add Your API Key**: Click the hamster icon, go to **Settings**, and add your OpenAI API key.
3.  **Monitor Your Usage**: Watch the hamster's speed change as you use the OpenAI API. Click the icon at any time to see detailed statistics.

### A Note on API Key Permissions

To read token consumption data, Ham uses OpenAI's usage API endpoint. Access to this endpoint requires an API key with **organization-level permissions** (e.g., a key generated by an "owner" or "admin" account). Standard secret keys generated by "member" accounts may not have the required permissions and will result in errors.

## ğŸ› ï¸ Development

The project is built with Swift and SwiftUI, with a modular architecture that separates concerns.

### Key Files for Development

*   `Sources/Ham/MenuBarManager.swift`: Manages the menu bar icon, animation, and dropdown menu.
*   `Sources/Ham/UsageMonitor.swift`: Orchestrates the polling of the OpenAI API.
*   `Sources/Ham/APIMonitor.swift`: Contains the `OpenAIMonitor` class, which handles the actual API calls to the OpenAI usage endpoint.
*   `Sources/Ham/HamsterAnimator.swift`: Manages the hamster's animation frames and speed.
*   `Sources/Ham/UsageAnalytics.swift`: Calculates trends and statistics from the raw usage data.

## ğŸ“ˆ Roadmap

The following features are planned for future releases:

*   [ ] **Cost Tracking**: Calculate and display the cost of token usage.
*   [ ] **Detailed Stats Window**: A separate window with historical charts and more granular data.
*   [ ] **Customizable Animations**: Choose different animation themes for the menu bar icon.

## ğŸ¤ Contributing

Contributions are welcome! If you'd like to help, please feel free to fork the repository, create a feature branch, and submit a pull request.

## ğŸ“„ License

This project is licensed under the Apache License 2.0. See the [LICENSE](LICENSE) file for details.